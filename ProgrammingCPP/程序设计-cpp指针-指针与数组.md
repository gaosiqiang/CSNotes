
# 指针与数组
通过探究指针与数组的之间的关系，能更清晰有深度的理解数组的本质；

## 1、指针与数组元素

```cpp
int a[5] = {1, 2, 3, 4, 5};
cout << a[3] << endl; //4
int *p = NULL;
p = &a[3];
cout << *p << endl;//4
*p = 10;
cout << a[3] << endl;//10
```

结论：指针变量指向数组元素与指向普通变量没有区别；

## 2、数组名的原理
概念：数组的名称和所对应的指针是存放在常量内存区域的，做事是指针常量；数组名存放的指针本质上也是属于常量；

特性：因为是存储在常量内存区域，所以只能读取不可以改写；

该代码会报错：

```cpp
int a[100] = {1, 2, 3};
int b[100] = {1, 2, 3};
a = &b;//非法代码；
a = 2;//非法代码；
```

代码分析：
数组名和所存储的指针是在常量内存区域存储的，所以只读不写；

## 3、指针与数组名

```cpp
int a[5] = {1, 2, 3, 4, 5};
cout << a << endl; // 0x7fff7c2a1b10
cout << *a << endl; // 1
cout << &a[0] << endl; // 0x7fff7c2a1b10
cout << a[0] << endl; // 1
```

代码说明：
数组名a是指向数组a的第一个元素的指针，注意是指针；


```cpp
int a[5] = {1, 2, 3, 4, 5};
int *b;
b = a;
int c;
c = a[0];
cout << a << endl; //0x7ffd9b59a360
cout << b << endl; //0x7ffd9b59a360
cout << c << endl; //1
cout << &c << endl; //0x7ffd9b59a35c
cout << &a[0] << endl; //0x7ffd9b59a360
```

代码分析：
`b = a;`只是将数组a的第一个元素的指针赋值给p；
`c = a[0]`是将数组a的第一个元素的值复制赋值给c，由输出的地址可知；


结论：
1、数组名是地址常量也就是指针常量；
1、因为a是常量所以不能被赋值；
2、a与&a[0]等价；

## 4、指针取数组元素值
数组元素的应用一般情况用下标来是使用的，如果通过指针和指针算术运算规则，那么代码的执行效率会更高；

### 总结规律
若定义：
数组 int a[10]; 指针 int \* pointer;

则：
pointer = a; 等价于 pointer = &a[0];
pointer + i; 等价于 a + i; 等价于&a[i];
\*(pointer + i); 等价于 \*(a + i); 等价于 a[i];
pointer[i]; 等价于 \*(pointer + i);


## 5、&的含义
若：int a[5] = {1, 2, 3, 4, 5};
则：a是数组a的第一个元素的指针；
若：&a;
则：&a是数组a的存储区域的第一个地址；

```cpp
int a[5] = {1, 2, 3, 4, 5};
cout << a << endl; //0x7ffc63e86740
cout << a + 1 << endl;//0x7ffc63e86744
cout << &a << endl;//0x7ffc63e86740
cout << &a + 1 << endl;//0x7ffc63e86754
cout << *(&a) << endl;//0x7ffc63e86740
cout << *(&a) + 1 << endl;//0x7ffc63e86744
cout << sizeof(a) << endl;//20，是数组a占用了20个字节；
cout << sizeof(&a) << endl;//8，是数组指针占用了8个字节；
```

代码分析：
1、a是数组a的第一个元素的指针，所以地址是0x7ffc63e86740；

2、a + 1 就是 0x7ffc63e86740 + 4 = 0x7ffc63e86744；

3、&a是数组a的存储区域的指针，a是数组a的第一个元素的指针。虽然值相等，但是所指向的内容是不同的，&a指向的是数组a，a是指向数组a的一个元素。所以值相同但是概念不同的；

4、&a + 1 相当于是要跨越一个数组所占用的存储区域，所以是0x7ffc63e86740 + 20 = 0x7ffc63e86754；

5、因为&a指向的内容是数组a，原则上&a等价于a、所以\*a是指向的数组a的第一个元素的指针、所以\*(&a) + 1 就是0x7ffc63e86740 + 4 = 0x7ffc63e86744；

6、数组a是5个int数据构成的，所以数组a的大小是：5个元素 x 4字节 = 20字节；

