# cpp运算成分
## 1、运算符
运算符是一种告诉编译器执行特定的数学或逻辑操作的符号。

c语言的运算符相对于其他编程语言的运算符是比较多的。c语言的运算符不仅多而且功能强大。

cpp的运算符比c语言的运算符还要强大，因为cpp中有运算符重载机制，可以赋予运算符更多的含义和功能。
后来诞生的编程语言都意识的淡化运算符的作用。

## 2、运算符分类
cpp内置了丰富的运算符，并提供了以下类型的运算符：

1、算数运算符
2、关系运算符
3、逻辑运算符
4、位运算符
5、赋值运算符
6、其他运算符

总结：
算数、关系、逻辑、位、赋值大部分都是二目运算的也有少出的一目运算；

## 3、运算符优先级的关系链
括号组() > 逻辑非! > 算数运算 > 关系运算 > 逻辑与&&和逻辑或|| > 赋值运算 > 逗号运算

参考‘运算优先级列表’。

## 4、运算符的运算原则
1、表达式运算结果分析方法1，借鉴数学中的合并同类项的思想，同等级归纳法分析。

2、表达式运算结果分析方法2，用运算符的优先级做火焰图，然后由上至下顺序分析。



## 5、算术运算符
### 5.1、优先级

| 4 | 3 | 2 | 1 |
|---|---|---|---|
| ++，-- |  () | *，/，% | +，- |

### 5.2、数据精度
运算过程中的数据类型的转换方向，也就是不同数据类型之间算数运算的时候数据的精度保留原则：

- 1、整数与整形运算得到的结果是整数；
- 2、短整形与整形运算是先将短整形转换成整形，得到的结果是整形；
- 3、短整型或整形与长整形运算先都转换成长整形，得到的结果是长整形；
- 4、实数与（实数，整形，字符）运算先都转换成double类型，得到的结果都是double，因为double的精度的问题小数位最后一位是舍入的方向随编译器的不同而不同；
- 5、有符号与无符号运算先将无符号转换成有符号，结果是都是有符号；
- 6、整形与字符运算先转换成整形，结果是整形。

总结：

- 1、运算过程中数据类型的精度是低的向高转换。
- 2、类型的转换实质上是转换数据在内存存储空间的bit位的数据映射数据，就是bit位的数据不动，只是二进制数据的表达格式的转化。
- 3、所以类型转换过程监控就可以将bit位的二进制数据用十六进制或八进制输出检查。
- 4、表达值的数据类型取决于表达包含的最高精度的数据类型。

## 6、关系运算符
### 6.1、优先级
- 1、高优先级：<，<=，>，>=
- 2、低优先级：==，!=
- 3、优先级方向：向右，就是先左后右

### 6.2、特征
关系运算表达式返回值是bool值。

## 7、逻辑运算符
### 7.1、优先级
非!  > 与&& > 或||

### 7.2、逻辑短路

1、与&&：表达式1 && 表达式2，当表达式1的值为0或false时，逻辑表达式直接返回false不只执行表达式2了。

2、或||：表达式1 || 表达式2，当表达式1的值非0或true时，逻辑表达式直接返回true不只执行表达式2了。

## 8、位运算符
定义：位运算是对内存存储空间字节的每个二进制位的数所进行的运算。在内存中字节是程序对内存进行操控的基本单位，位运算虽然是对二进制位进行的运算但实际上这种运算也是通过对字节为单位的控制来实现的。

### 8.1、类型

| 名称 | 类型 |
|---|---|
| 按位与& | 双目运算符 |
| 按位或\| | 双目运算符 |
| 按位异或^ | 双目运算符 |
| 取反~ | 单目运算符 |
| 左移<< | 单目运算符 |
| 右移>> | 单目运算符 |

补充：
异或运算：参与运算的2个数相同逻辑真值为false，参与运算的2个数不同逻辑真值为true；
同或运算：与异或运算逻辑真好相反；

### 8.2、demo
#### 应用1
1、a和b的值互换使用按位异或运算实现，不借用第三个变量和函数

```cpp
a = a ^ b;
b = b ^ a;
a = a ^ b;
```

#### 应用2

```cpp
//位运算
int a = 4;
int b = 3;
cout << "a的二进制：" << bitset<numeric_limits<unsigned int>::digits>(a) << endl; //二进制输出变量a
cout << "b的二进制：" << bitset<numeric_limits<unsigned int>::digits>(b) << endl; //二进制输出变量b
int c;
c = a & b;
cout << "a&b二进制：" << bitset<numeric_limits<unsigned int>::digits>(c) << endl; //二进制输出变量c
c = a | b;
cout << "a|b二进制：" << bitset<numeric_limits<unsigned int>::digits>(c) << endl; //二进制输出变量c
c = a ^ b;
cout << "a^b二进制：" << bitset<numeric_limits<unsigned int>::digits>(c) << endl; //二进制输出变量c
c = ~a;
cout << "~a 二进制：" << bitset<numeric_limits<unsigned int>::digits>(c) << endl; //二进制输出变量c
c = a << 2;
cout << "a<<2二进制：" << bitset<numeric_limits<unsigned int>::digits>(c) << endl; //二进制输出变量c
c = a >> 2;
cout << "a>>2二进制：" << bitset<numeric_limits<unsigned int>::digits>(c) << endl; //二进制输出变量c

//输出结果
//a的二进制：00000000000000000000000000000100
//b的二进制：00000000000000000000000000000011
//a&b二进制：00000000000000000000000000000000
//a|b二进制：00000000000000000000000000000111
//a^b二进制：00000000000000000000000000000111
//~a 二进制：11111111111111111111111111111011
//a<<2二进制：00000000000000000000000000010000
//a>>2二进制：00000000000000000000000000000001
```

### 8.3、PS
这里想象抽象的将每个bit位平铺和竖立两种排列方式。平铺的左端对应的竖立的高位，平铺的右端对应的竖立的低位。

位运算是对存储的bit位的运算，如果是数字类型数据那么是对原码的补码做的位运算，运算结果还要推导成原码，然后获取表示。

## 9、赋值运算符
### 9.1、功能定义
给左边的变量或常量做赋值运算。

### 9.2、基本使用
1、变量赋值 varName = value;
2、定义初始化 type varName = value;

### 9.3、进阶用法
1、运算符两边的数据类型不同的赋值运算会先类型转换，具体是将右边的赋值数据类型向左边的数据类型转换。
int a = 3.14;//只保留整数部分，输出3
float b = 3;//默认会补小数位，默认输出6位精度3.00000
char c = 64;//会赋予ASCII码64对应的字符，输出@

2、占用内存存储空间大的数据类型赋给占用内存存储空间小的数据类型。系统会将占用空间大数据类型在内存存储空间中对应的二进制bit位从后面向前截取占用内存存储空间小数据类型对应的的二进制bit位长度，最后将截取的二进制bit对应的值赋给占用内存存储空间小的数据类型。
int a = 123123;
char b = ' ';//定义一个空格
b = a;//将123123对应的二进制bit位截取后面的8个bit，然后将8个bit对应的十进制数字所对应的ASCII码的字符赋值给b。

3、占用内存存储空间小的数据类型赋给占用内存存储空间大的数据类型，那么原来是什么数据，赋值后依然还是什么数据。这个比较容易理解，可以理解成不够的bit位自动向上补0。

4、将有符号数据类型的值赋给无符号数据类的值相互赋值，会直接搬运将数据对应的二进制bit位的符号位的bit当成数字bit。

5、将无符号数据类型的值赋给有符号数据类的值相互赋值，会直接搬运将数据对应的二进制bit位的最高位的bit当成符号位。

6、复合赋值运算：+=，=+ 等等，

7、连续赋值运算：a = b = 5;//a和b都是定义好的变量，可以这样连续赋值；int a = b = c = 5;//c&cpp中赋值运算不可这样连续使用，其他动态语言可以；a = (b = 4) + (c = 6);//a为10，b为4，c为6；

8、赋值运算表达式的返回值是赋值的值。a = 10;//这个表达式返回值是10，其他语言返回是1或者是true。

## 10、其他运算符
### 10.1、逗号运算符
逗号运算符**,**；

逗号运算符是用来连接表达式的运算符；使用：表达式1, 表达式2, 表达式;，用逗号连接多个表达式组成的逗号表达式就是逗号表达式，执行顺序是执行表达式1然后是表达式2然后是表达式3，逗号表达式的值是其中最后一个执行表达式的值。

#### 10.1.1、demo

```cpp
int a;
a = 1;
a = 2, a = 3, a = 10;
cout << "a=" << a << endl; //输出10
return 0;
```

上述代码是先运算了a = 2 然后运算 a = 3 然后运算 a = 10，所以输出的a的值是10；

### 10.2、三目运算
三目运算也称作三元运算；

#### 10.2.1、规范
三目运算：表达式1 ? 表达式2 : 表达式3;如果表达式1为真，三目运算表达式的值为表达式2的值反之就是表达式2的值；

#### 10.2.2、demo

```cpp
int a = (1 == 2) ? 3 : 4;
cout << "a=" << a << endl; //输出4
return 0;
```

### 10.3、强制类型转换运算符
强制类型转换运算符：就是将表达式的值数据类型强转换成指定类型的运算，注意是表达的值，而表达式原来的指向的内存存储空间对应的数据类型是不变的，只是体现在这个强制类型转换表达中。定义：(typeName) 表达式; 。demo：(int) a;//强制将(int) a;这个表达式值数据类型转换成int类型，但是变量a依然还是原来的数据类型不会发生改变。在函数形参和实参的是场景下(typeName)有类型约束的作用和意义。

